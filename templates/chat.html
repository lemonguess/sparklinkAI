{% extends "base.html" %}

{% block title %}SparkLink AI - 智能聊天{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/chat.css">
{% endblock %}

{% block content %}
<!-- 聊天界面 -->
<div class="chat-container" id="chatContainer">
    <div class="chat-header">
        <h3 id="currentSessionTitle"><i class="fas fa-comments"></i> SparkLink AI 聊天助手</h3>
        <div class="chat-actions">
            <button class="btn-icon" id="clearChatBtn" title="清空聊天">
                <i class="fas fa-trash"></i>
            </button>
            <button class="btn-icon" id="settingsBtn" title="设置">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </div>
    
    <div class="chat-messages" id="chatMessages">
        <div class="welcome-message">
            <div class="welcome-icon">
                <i class="fas fa-robot"></i>
            </div>
            <h3>欢迎使用 SparkLink AI</h3>
            <p>我是您的智能助手，可以帮您回答问题、处理文档和进行知识检索。</p>
            <div class="quick-actions">
                <button class="quick-btn" onclick="sendQuickMessage('你好，请介绍一下你的功能')">
                    <i class="fas fa-hand-wave"></i> 打个招呼
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('帮我总结一下知识库的内容')">
                    <i class="fas fa-book"></i> 知识总结
                </button>
                <button class="quick-btn" onclick="sendQuickMessage('如何使用这个系统？')">
                    <i class="fas fa-question-circle"></i> 使用帮助
                </button>
            </div>
        </div>
    </div>
    
    <div class="chat-input-container">
        <div class="input-wrapper">
            <div class="input-left-controls">
                <button class="strategy-btn" id="knowledgeBtn" data-strategy="knowledge_only" title="仅使用知识库">
                    <i class="fas fa-database"></i>
                </button>
                <button class="strategy-btn" id="webBtn" data-strategy="web_only" title="仅使用网络搜索">
                    <i class="fas fa-search"></i>
                </button>
                <button class="strategy-btn active" id="autoBtn" data-strategy="auto" title="自动选择策略">
                    <i class="fas fa-magic"></i>
                </button>
            </div>
            <textarea id="messageInput" placeholder="输入您的问题..." rows="1"></textarea>
            <div class="input-right-controls">
                <button id="sendBtn" class="btn-send" title="发送消息">
                    <i class="fas fa-paper-plane"></i>
                </button>
                <button id="stopBtn" class="btn-stop" title="停止生成" style="display: none;">
                    <i class="fas fa-stop"></i>
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/chat.js"></script>
{% endblock %}