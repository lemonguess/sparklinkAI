{% extends "base.html" %}

{% block title %}SparkLink AI - 知识库管理{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/knowledge.css">
{% endblock %}

{% block content %}
<!-- 知识库管理区域 -->
<div class="knowledge-container" id="knowledgeContainer">
    <!-- 文档管理区域 -->
    <div class="document-panel" id="documentPanel">
        <div class="panel-header">
            <h3><i class="fas fa-folder-open"></i> 文档管理</h3>
            <div class="panel-actions">
                <button class="btn btn-primary" id="uploadDocBtn">
                    <i class="fas fa-upload"></i> 上传文档
                </button>
                <button class="btn btn-secondary" id="addTextBtn">
                    <i class="fas fa-plus"></i> 添加文本
                </button>
                <button class="btn btn-secondary" id="refreshDocsBtn">
                    <i class="fas fa-sync-alt"></i> 刷新
                </button>
            </div>
        </div>
        <div class="document-list" id="documentList">
            <div class="loading">加载中...</div>
        </div>
    </div>

    <!-- 知识召回检测区域 -->
    <div class="knowledge-test-panel">
        <div class="panel-header">
            <h3><i class="fas fa-search"></i> 知识召回检测</h3>
        </div>
        <div class="test-controls">
            <div class="input-group">
                <input type="text" id="testQuery" placeholder="输入测试查询..." class="form-control">
                <button class="btn btn-primary" id="runTestBtn">
                    <i class="fas fa-play"></i> 检索
                </button>
                <button class="btn btn-secondary" id="clearResultsBtn">
                    <i class="fas fa-trash"></i> 清空结果
                </button>
            </div>
            <div class="test-params">
                <div class="param-group">
                    <label for="testTopK">返回数量:</label>
                    <input type="number" id="testTopK" value="5" min="1" max="20" class="form-control">
                </div>
                <div class="param-group">
                    <label for="testSimilarity">相似度阈值:</label>
                    <input type="range" id="testSimilarity" min="0" max="1" step="0.01" value="0.5" class="form-control">
                    <span class="similarity-value">0.50</span>
                </div>
            </div>
        </div>
        <div class="test-results" id="testResults">
            <!-- 检索结果将在这里显示 -->
        </div>
    </div>

    <!-- 默认欢迎界面 -->
    <div class="welcome-panel" id="welcomePanel">
        <div class="welcome-content">
            <div class="welcome-icon">
                <i class="fas fa-database"></i>
            </div>
            <h3>知识库管理</h3>
            <p>管理您的文档和知识库，进行知识检索测试</p>
            <div class="quick-actions">
                <button class="quick-btn" onclick="app.showNewKnowledgeBaseModal()">
                    <i class="fas fa-plus"></i> 创建知识库
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/knowledge.js"></script>
{% endblock %}